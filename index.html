<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>ARK Dino Tracker</title>

<!-- Firebase -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
  import { getAuth, GoogleAuthProvider, signInWithPopup, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js";
  import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAMLeQfaP3gySD5zFXJX1GS5m0Erla4w7g",
    authDomain: "ark-dino-tracker.firebaseapp.com",
    projectId: "ark-dino-tracker",
    storageBucket: "ark-dino-tracker.firebasestorage.app",
    messagingSenderId: "316048016234",
    appId: "1:316048016234:web:c689cfaec48daa958fdb13"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  const dinos = [
"Achatina","Allosaurus","Alpha Basilisk","Alpha Carnotaurus","Alpha Deathworm","Alpha Leedsichthys","Alpha Mosasaurus","Alpha Raptor","Alpha Rex","Alpha Tusoteuthis","Amargasaurus","Ankylosaurus","Andrewsarchus","Angler","Araneo","Archaeopteryx","Argentavis","Arthropleura","Astrodelphis","Astrocetus","Baryonyx","Basilisk","Basilosaurus","Beelzebufo","Bloodstalker","Brontosaurus","Bulbdog","Carcharodontosaurus","Carbonemys","Carnotaurus","Castoroides","Chalicotherium","Compy","Coelacanth","Cnidaria","Crystal Wyvern","Daeodon","Deinonychus","Dilophosaur","Dimetrodon","Dimorphodon","Diplocaulus","Diplodocus","Direbear","Direwolf","Doedicurus","Dodo","Dunkleosteus","Electrophorus","Enforcer","Equus","Eurypterid","Featherlight","Ferox","Fjordhawk","Gacha","Gallimimus","Gasbags","Giganotosaurus","Gigantopithecus","Glowtail","Griffin","Hesperornis","Hyaenodon","Ichthyornis","Ichthyosaurus","Iguanodon","Jerboa","Kaprosuchus","Karkinos","Kentrosaurus","Lymantria","Leedsichthys","Lystrosaurus","Maewing","Magmasaur","Mammoth","Managarmr","Manta","Mantis","Megachelon","Megalania","Megaloceros","Megalodon","Megalosaurus","Megatherium","Mesopithecus","Microraptor","Mosasaurus","Moschops","Nameless","Noglin","Onyc","Otter","Oviraptor","Ovis","Pachy","Pachyrhinosaurus","Para","Paracer","Pegomastax","Pelagornis","Phiomia","Piranha","Plesiosaur","Procoptodon","Pteranodon","Pulmonoscorpius","Purlovia","Raptor","Ravager","Reaper","Rex","Rock Drake","Rock Elemental","Roll Rat","Sabertooth","Sarco","Shadowmane","Shinehorn","Snow Owl","Spino","Stegosaurus","Tapejara","Terror Bird","Therizinosaurus","Thorny Dragon","Thylacoleo","Titanoboa","Titanosaur","Triceratops","Trilobite","Troodon","Tusoteuthis","Unicorn","Velonasaur","Vulture","Woolly Rhino","Wyvern","Yutyrannus"
  ];

  let currentUser = null;

  onAuthStateChanged(auth, async (user) => {
    currentUser = user;
    document.getElementById("user").innerText = user ? user.displayName : "Not logged in";
    if (user) load();
  });

  async function load() {
    const ref = doc(db, "users", currentUser.uid);
    const snap = await getDoc(ref);
    const saved = snap.exists() ? snap.data().dinos || [] : [];
    dinos.forEach(d => document.getElementById(d).checked = saved.includes(d));
  }

  async function save() {
    if (!currentUser) return alert("Login first.");
    const selected = dinos.filter(d => document.getElementById(d).checked);
    await setDoc(doc(db, "users", currentUser.uid), { dinos: selected });
    alert("Saved!");
  }

  window.login = () => signInWithPopup(auth, new GoogleAuthProvider());
  window.logout = () => signOut(auth);
  window.save = save;
</script>

<style>
body { font-family: sans-serif; padding: 16px; }
label { display: block; padding: 3px 0; }
</style>

</head>
<body>
<h2>ARK Dino Tracker (Google Sync)</h2>
<button onclick="login()">Login with Google</button>
<button onclick="logout()">Logout</button>
<p>User: <span id="user">Not logged in</span></p>
<hr>

<div id="list"></div>

<script>
  const list = document.getElementById("list");
  const dinos = [
"Achatina","Allosaurus","Alpha Basilisk","Alpha Carnotaurus","Alpha Deathworm","Alpha Leedsichthys","Alpha Mosasaurus","Alpha Raptor","Alpha Rex","Alpha Tusoteuthis","Amargasaurus","Ankylosaurus","Andrewsarchus","Angler","Araneo","Archaeopteryx","Argentavis","Arthropleura","Astrodelphis","Astrocetus","Baryonyx","Basilisk","Basilosaurus","Beelzebufo","Bloodstalker","Brontosaurus","Bulbdog","Carcharodontosaurus","Carbonemys","Carnotaurus","Castoroides","Chalicotherium","Compy","Coelacanth","Cnidaria","Crystal Wyvern","Daeodon","Deinonychus","Dilophosaur","Dimetrodon","Dimorphodon","Diplocaulus","Diplodocus","Direbear","Direwolf","Doedicurus","Dodo","Dunkleosteus","Electrophorus","Enforcer","Equus","Eurypterid","Featherlight","Ferox","Fjordhawk","Gacha","Gallimimus","Gasbags","Giganotosaurus","Gigantopithecus","Glowtail","Griffin","Hesperornis","Hyaenodon","Ichthyornis","Ichthyosaurus","Iguanodon","Jerboa","Kaprosuchus","Karkinos","Kentrosaurus","Lymantria","Leedsichthys","Lystrosaurus","Maewing","Magmasaur","Mammoth","Managarmr","Manta","Mantis","Megachelon","Megalania","Megaloceros","Megalodon","Megalosaurus","Megatherium","Mesopithecus","Microraptor","Mosasaurus","Moschops","Nameless","Noglin","Onyc","Otter","Oviraptor","Ovis","Pachy","Pachyrhinosaurus","Para","Paracer","Pegomastax","Pelagornis","Phiomia","Piranha","Plesiosaur","Procoptodon","Pteranodon","Pulmonoscorpius","Purlovia","Raptor","Ravager","Reaper","Rex","Rock Drake","Rock Elemental","Roll Rat","Sabertooth","Sarco","Shadowmane","Shinehorn","Snow Owl","Spino","Stegosaurus","Tapejara","Terror Bird","Therizinosaurus","Thorny Dragon","Thylacoleo","Titanoboa","Titanosaur","Triceratops","Trilobite","Troodon","Tusoteuthis","Unicorn","Velonasaur","Vulture","Woolly Rhino","Wyvern","Yutyrannus"
  ];

  dinos.forEach(d => {
    list.innerHTML += `<label><input type="checkbox" id="${d}"> ${d}</label>`;
  });
</script>

<button onclick="save()">Save</button>

</body>
</html>
